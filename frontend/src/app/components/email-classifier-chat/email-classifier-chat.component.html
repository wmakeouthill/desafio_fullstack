<!-- Layout Principal com Header Global -->
<div class="app-layout">
    <!-- Header Global AutoU (topo da pÃ¡gina) -->
    <header class="global-header">
        <div class="global-header-content">
            <a href="https://www.autou.io" target="_blank" class="header-brand">
                <img src="https://www.autou.io/logo-autou.png" alt="AutoU" class="global-logo" />
            </a>
            <nav class="global-nav">
                <span class="nav-item active">Classificador de Emails</span>
                <span class="nav-badge">AI-Powered</span>
            </nav>
        </div>
    </header>

    <!-- Container do Chat -->
    <div class="chat-container">
        <!-- Header do Chat (assistente + modelo) -->
        <header class="chat-header">
            <div class="chat-header-content">
                <div class="assistant-info">
                    <div class="assistant-avatar">
                        <span class="assistant-icon">ðŸ¤–</span>
                    </div>
                    <div class="assistant-details">
                        <span class="assistant-name">Assistente AutoU</span>
                        <span class="assistant-model">
                            @if (providerSelecionado() === 'openai') {
                            OpenAI â€¢ {{ providers()?.providers?.openai?.model || 'gpt-4o-mini' }}
                            } @else {
                            Gemini â€¢ {{ providers()?.providers?.gemini?.model || 'gemini-1.5-flash' }}
                            }
                        </span>
                    </div>
                </div>
                <span class="chat-status">Online</span>
            </div>
        </header>

        <!-- Ãrea principal do Chat -->
        <main class="chat-main">
            <!-- Ãrea de mensagens -->
            <div class="messages-area" #messagesContainer>
                @if (temMensagens()) {
                @for (msg of mensagens(); track msg.id) {
                <app-chat-message [message]="msg" />
                }
                } @else {
                <!-- Empty state -->
                <div class="empty-state">
                    <div class="empty-logo-container">
                        <span class="empty-emoji">ðŸ¤–</span>
                        <img src="https://www.autou.io/logo-autou.png" alt="AutoU" class="empty-logo" />
                    </div>
                    <h2 class="empty-title">Classificador de Emails com IA</h2>
                    <p class="empty-description">
                        Cole o conteÃºdo de um email ou anexe um arquivo (.txt, .pdf, .eml, .msg, .mbox) para
                        classificÃ¡-lo
                        automaticamente como <strong>Produtivo</strong> ou <strong>Improdutivo</strong>.
                    </p>
                    <div class="empty-features">
                        <div class="feature">
                            <span class="feature-icon">âš¡</span>
                            <span class="feature-text">ClassificaÃ§Ã£o instantÃ¢nea</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">ðŸ’¬</span>
                            <span class="feature-text">SugestÃ£o de resposta</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">ðŸŽ¯</span>
                            <span class="feature-text">Alta precisÃ£o</span>
                        </div>
                    </div>
                </div>
                }
            </div>

            <!-- Input do Chat -->
            <app-chat-input [providers]="providers()" [providerSelecionado]="providerSelecionado()"
                [carregando]="carregando()" [temMensagens]="temMensagens()" (enviarTexto)="onEnviarTexto($event)"
                (enviarArquivo)="onEnviarArquivo($event)" (providerChange)="onProviderChange($event)"
                (novoChat)="onNovoChat()" />
        </main>
    </div>
</div>
