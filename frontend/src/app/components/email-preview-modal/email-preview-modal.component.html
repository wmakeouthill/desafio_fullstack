<div class="modal-backdrop" (click)="onBackdropClick($event)" (keydown.escape)="onFechar()">
    <dialog class="modal-container" open aria-labelledby="email-modal-title">
        <!-- Header do Modal (simula cliente de email) -->
        <div class="modal-header">
            <div class="header-left">
                <img src="logo_autou.png" alt="Autou" class="header-logo" />
                <span class="header-title">Visualiza√ß√£o de Email</span>
            </div>
            <button type="button" class="btn-close" (click)="onFechar()" aria-label="Fechar">
                ‚úï
            </button>
        </div>

        <!-- Barra de a√ß√µes do email -->
        <div class="email-toolbar">
            <div class="toolbar-actions">
                <button type="button" class="toolbar-btn" title="Responder">
                    <span class="toolbar-icon">‚Ü©Ô∏è</span>
                    <span class="toolbar-label">Responder</span>
                </button>
                <button type="button" class="toolbar-btn" title="Encaminhar">
                    <span class="toolbar-icon">‚û°Ô∏è</span>
                    <span class="toolbar-label">Encaminhar</span>
                </button>
                <button type="button" class="toolbar-btn" title="Arquivar">
                    <span class="toolbar-icon">üìÅ</span>
                    <span class="toolbar-label">Arquivar</span>
                </button>
            </div>
            <button
                type="button"
                class="btn-copiar-email"
                (click)="copiarEmail()"
                [class.copiado]="copiado()">
                @if (copiado()) {
                    <span class="btn-icon">‚úì</span>
                    <span>Copiado!</span>
                } @else {
                    <span class="btn-icon">üìã</span>
                    <span>Copiar Email</span>
                }
            </button>
        </div>

        <!-- √Årea de scroll do email (header + body) -->
        <div class="email-scroll-area">
            <!-- Cabe√ßalho do Email -->
            <div class="email-header">
                <div class="email-meta">
                    <div class="meta-row">
                        <span class="meta-label">De:</span>
                        <div class="meta-value sender">
                            <span class="sender-name">{{ remetente.nome }}</span>
                            <span class="sender-email">&lt;{{ remetente.email }}&gt;</span>
                        </div>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Para:</span>
                        <span class="meta-value">cliente@empresa.com.br</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Data:</span>
                        <span class="meta-value">{{ dataHoraAtual }}</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Assunto:</span>
                        <span class="meta-value subject">{{ assuntoEmail() }}</span>
                    </div>
                </div>
            </div>

            <!-- Corpo do Email -->
            <div class="email-body">
                <!-- Sauda√ß√£o -->
                <p class="email-greeting">Prezado(a) Cliente,</p>

                <!-- Conte√∫do principal -->
                <div class="email-content">
                    {{ resultado().resposta_sugerida }}
                </div>

                <!-- Assinatura Profissional -->
                <div class="email-signature">
                    <p class="signature-closing">Atenciosamente,</p>

                    <div class="signature-block">
                        <div class="signature-main">
                            <img src="logo_autou.png" alt="Autou" class="signature-logo" />
                            <div class="signature-details">
                                <p class="signature-name">{{ remetente.nome }}</p>
                                <p class="signature-cargo">{{ remetente.cargo }}</p>
                                <p class="signature-dept">{{ remetente.departamento }}</p>
                        </div>
                    </div>

                    <div class="signature-divider"></div>

                    <div class="signature-contact">
                        <div class="contact-item">
                            <span class="contact-icon">üè¢</span>
                            <span class="contact-text">{{ remetente.empresa }}</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">‚úâÔ∏è</span>
                            <span class="contact-text">{{ remetente.email }}</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">üìû</span>
                            <span class="contact-text">{{ remetente.telefone }}</span>
                        </div>
                    </div>
                </div>

                <!-- Rodap√© legal -->
                <div class="signature-footer">
                    <p class="footer-notice">Esta mensagem foi gerada com aux√≠lio de intelig√™ncia artificial.</p>
                    <p class="footer-company">
                        <strong>Autou</strong> - Solu√ß√µes Inteligentes para Comunica√ß√£o
                    </p>
                    <p class="footer-legal">
                        Esta mensagem pode conter informa√ß√µes confidenciais. Se voc√™ n√£o for o destinat√°rio
                        pretendido, por favor, notifique o remetente e apague esta mensagem.
                    </p>
                </div>
            </div>
        </div>
        </div>
    </dialog>
</div>
