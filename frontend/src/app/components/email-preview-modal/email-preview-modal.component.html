<div class="modal-backdrop" (click)="onBackdropClick($event)" (keydown.escape)="onFechar()">
    <dialog class="modal-container" open aria-labelledby="email-modal-title">
        <!-- Header do Modal (simula cliente de email) -->
        <div class="modal-header">
            <div class="header-left">
                <img src="https://github.com/wmakeouthill/desafio_fullstack/blob/main/frontend/public/logo_autou.png?raw=true" alt="Autou" class="header-logo" />
                <span class="header-title">VisualizaÃ§Ã£o de Email</span>
            </div>
            <button type="button" class="btn-close" (click)="onFechar()" aria-label="Fechar">
                âœ•
            </button>
        </div>

        <!-- Barra de aÃ§Ãµes do email -->
        <div class="email-toolbar">
            <span class="toolbar-title">Preview da resposta</span>
            <button
                type="button"
                class="btn-copiar-email"
                (click)="copiarEmail()"
                [class.copiado]="copiado()">
                @if (copiado()) {
                    <span class="btn-icon">âœ“</span>
                    <span>Copiado!</span>
                } @else {
                    <span class="btn-icon">ğŸ“‹</span>
                    <span>Copiar Resposta</span>
                }
            </button>
        </div>

        <!-- Ãrea de scroll do email (header + body) -->
        <div class="email-scroll-area">
            <!-- CabeÃ§alho do Email -->
            <div class="email-header">
                <div class="email-meta">
                    <div class="meta-row">
                        <span class="meta-label">De:</span>
                        <div class="meta-value sender">
                            <span class="sender-name">{{ remetente.nome }}</span>
                            <span class="sender-email">&lt;{{ remetente.email }}&gt;</span>
                        </div>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Para:</span>
                        <span class="meta-value">cliente@empresa.com.br</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Data:</span>
                        <span class="meta-value">{{ dataHoraAtual }}</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Assunto:</span>
                        <span class="meta-value subject">{{ assuntoEmail() }}</span>
                    </div>
                </div>
            </div>

            <!-- Corpo do Email -->
            <div class="email-body">
                <!-- ConteÃºdo principal (jÃ¡ inclui saudaÃ§Ã£o e despedida geradas pela IA) -->
                <div class="email-content">
                    {{ resultado().resposta_sugerida }}
                </div>

                <!-- Assinatura Profissional -->
                <div class="email-signature">
                    <div class="signature-block">
                        <div class="signature-main">
                            <img src="https://github.com/wmakeouthill/desafio_fullstack/blob/main/frontend/public/logo_autou.png?raw=true" alt="Autou" class="signature-logo" />
                            <div class="signature-details">
                                <p class="signature-name">{{ remetente.nome }}</p>
                                <p class="signature-cargo">{{ remetente.cargo }}</p>
                                <p class="signature-dept">{{ remetente.departamento }}</p>
                        </div>
                    </div>

                    <div class="signature-divider"></div>

                    <div class="signature-contact">
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ¢</span>
                            <span class="contact-text">{{ remetente.empresa }}</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">âœ‰ï¸</span>
                            <span class="contact-text">{{ remetente.email }}</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-icon">ğŸ“</span>
                            <span class="contact-text">{{ remetente.telefone }}</span>
                        </div>
                    </div>
                </div>

                <!-- RodapÃ© legal -->
                <div class="signature-footer">
                    <p class="footer-notice">Esta mensagem foi gerada com auxÃ­lio de inteligÃªncia artificial.</p>
                    <p class="footer-company">
                        <strong>Autou</strong> - SoluÃ§Ãµes Inteligentes para ComunicaÃ§Ã£o
                    </p>
                    <p class="footer-legal">
                        Esta mensagem pode conter informaÃ§Ãµes confidenciais. Se vocÃª nÃ£o for o destinatÃ¡rio
                        pretendido, por favor, notifique o remetente e apague esta mensagem.
                    </p>
                </div>
            </div>
        </div>
        </div>
    </dialog>
</div>
